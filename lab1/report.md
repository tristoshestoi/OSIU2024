# LAB1
## Nginx

### Цель 
Целью лабораторной работы является запуск и настройка nginx сервера, в связи с чем начнем с установки и проверки работы непосредственно сервиса nginx.

### Установка
Для начала установим nginx на Windows с помощью официального гайда – скачиваем дистрибутив, распаковываем его, переходим в распакованную папку и выполняем в powershell start nginx
Для проверки работоспособности сервера проверям запущенные процессы выполнив tasklist /fi "imagename eq nginx.exe" 
После этого переходим в браузере на старницу localhost и видим приветствующую нас стартовую страницу nginx, являющейся html файлом index.html из папки рабочей директории html.

![alt text](image.png)

### Настройка HTTPS

Далее, нам необходимо настроить сертификаты, для того чтобы наш сервер работал по https. Для этого генерируем сертификат c помощью команды
```
openssl
```
приложенной на скриншоте.

![alt text](image-1.png)

После этого меняем конфиг nginx'a, добавив в блок server поля ssl_certificate и ssl_sertificate_key и выставив им значения соответсвующие названиям сгенерированных файлов, а так же добавив ssl к полю listen.

![alt text](image-2.png)

Пробуем присоединиться к серверу по https. Сервер отвечает, однако браузер сообщает нам о том что подключение все равно небезопасное.

![alt text](image-3.png)

![alt text](image-4.png)

Для того чтобы соединение было безопасным, настроим принудительное перенаправление с порта 80 на порт 443, изменив конфигурацию nginx, добавили еще один блок server, как представлено на скриншоте ниже. 

![alt text](image-5.png)

Протестируем наши запросы с помощью postman. Как видно на скриншотах, наш http запрос успешно редайректится, а https запрос возвращает OK. Удар!

![alt text](image-6.png)

![alt text](image-7.png)

### Алиасы

Теперь настроим алиасы, изменив конфигурацию nginx. Сделаем так чтобы по url localhost/a/ отображалась другая страница, добавив в конфиг объект location, как представлено на скриншоте.

![alt text](image-8.png)

### Виртуальные хосты

Добавим виртуальные хосты, чтобы наш сервер обслуживал несколько доменных имен. В нашем случае сделаем достаточную реализацию, чтобы наша дефолтная index страница nginx работала по другому имени.
Для этого добавим еще один блок server в конфиг файл nginx'a как представлено на скриншоте.

![alt text](image-9.png)

И добавим в файл разрешения доменных имен hosts запись о нашем имени labsite для того, чтобы в браузере можно было перейти не по айпи, а по имени домена.

![alt text](image-10.png)